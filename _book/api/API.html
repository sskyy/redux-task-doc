<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>API | redux-task</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    
    <link rel="prev" href="../usage/Basic.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="3"
        data-chapter-title="API"
        data-filepath="api/API.md"
        data-basepath=".."
        data-revision="Tue Mar 08 2016 13:21:45 GMT+0800 (CST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="introduction/index.html">
            
                
                    <a href="../introduction/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Get Started
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="introduction/Quick_Start.html">
            
                
                    <a href="../introduction/Quick_Start.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Quick Start
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="introduction/Thoughts_Behind_Code.html">
            
                
                    <a href="../introduction/Thoughts_Behind_Code.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Thoughts Behind Code
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="usage/index.html">
            
                
                    <a href="../usage/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Usage
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="usage/Basic.html">
            
                
                    <a href="../usage/Basic.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Basic
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="usage/Dynamic_Task_Name.html">
            
            <span><b>2.2.</b> Dynamic Task Name</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="3" data-path="api/API.html">
            
                
                    <a href="../api/API.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        API
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >redux-task</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="api">API</h1>
<h2 id="listen-event-handler-">listen( event, handler )</h2>
<h3 id="arguments">Arguments</h3>
<ul>
<li>event(String|Function) : use a string or a function to match certain event.</li>
<li>handler(Generator) : code will be executed when event match. listener will receive two part of arguments. The first is an object with basic APIs, the second is the arguments emitted with the event.</li>
</ul>
<h3 id="returns">Returns</h3>
<p>EventHandler: internal data structure.</p>
<h3 id="examples">Examples</h3>
<pre><code class="lang-javascript">listen(<span class="hljs-string">&apos;login&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params"></span>)</span>{})
</code></pre>
<p>use a function which returns a bool to match event:</p>
<pre><code class="lang-javascript">listen(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
  <span class="hljs-keyword">return</span>  event === <span class="hljs-string">&apos;login&apos;</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params"></span>)</span>{})
</code></pre>
<p>Listen to a redux action:</p>
<p>Actually, when a action is dispatched, the action will be emit as event also. So we can use a function to match actions we want:</p>
<pre><code class="lang-javascript"> listen(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">action</span>)</span>{
   <span class="hljs-keyword">return</span>  action.type &amp;&amp; action.type=== <span class="hljs-string">&apos;some-redux-action-type&apos;</span>
 }, <span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params"></span>)</span>{})
</code></pre>
<p> or use a helper function to match certain action type:</p>
<pre><code class="lang-javascript"> listen( fromReduxAction(<span class="hljs-string">&apos;some-redux-action-type&apos;</span>), <span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params"></span>)</span>{
 })
</code></pre>
<h2 id="name-asynchronousaction-name-">name( asynchronousAction, name )</h2>
<h3 id="arguments">Arguments</h3>
<ul>
<li>asynchronousAction(Generator|Promise|Function) : Internally we use <strong>co.js</strong> like machanism to handle asynchronous code. So, you can name anything can be yield by co.</li>
<li><p>name(String) : unique name of the task.</p>
<h3 id="returns">Returns</h3>
<p>Internal data structure.</p>
</li>
</ul>
<h2 id="gettaskstate">getTaskState()</h2>
<p>This api can only be achieved in listener. Task have three state: <strong>pending</strong>, <strong>fulfilled</strong> and <strong>rejected</strong>.</p>
<h3 id="returns">Returns</h3>
<p>An Object contains all tasks with state.</p>
<h3 id="example">Example</h3>
<pre><code class="lang-javascript">listen(<span class="hljs-string">&apos;login&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params">{getTaskState}</span>)</span>{
  <span class="hljs-keyword">if</span>( getTaskState()[<span class="hljs-string">&apos;taskA&apos;</span>] === <span class="hljs-string">&apos;pending&apos;</span> ){
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;task a is running&apos;</span>)
  }
})
</code></pre>
<h2 id="cancelname">cancel(name)</h2>
<h2 id="arguments">Arguments</h2>
<ul>
<li>name(String) : The name of task to cancel.</li>
</ul>
<p>This api can only be achieved in listener.</p>
<h3 id="example">Example</h3>
<pre><code class="lang-javascript">listen(<span class="hljs-string">&apos;login&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params">{cancel, getTaskState}</span>)</span>{
  <span class="hljs-keyword">if</span>( getTaskState()[<span class="hljs-string">&apos;taskA&apos;</span>] === <span class="hljs-string">&apos;pending&apos;</span> ){
    cancel(<span class="hljs-string">&apos;taskA&apos;</span>)
  }
})
</code></pre>
<h2 id="dispatch">dispatch()</h2>
<p>The same as redux dispatch method. This api can only be achieved in listener.</p>
<h3 id="example">Example</h3>
<pre><code class="lang-javascript">listen(<span class="hljs-string">&apos;login&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params">{dispatch}</span>)</span>{
  dispatch({type:<span class="hljs-string">&apos;login&apos;</span>})
})
</code></pre>
<h2 id="getstate">getState()</h2>
<p>The same as redux getState method. This api can only be achieved in listener.</p>
<h3 id="example">Example</h3>
<pre><code class="lang-javascript">listen(<span class="hljs-string">&apos;login&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> *(<span class="hljs-params">{getState}</span>)</span>{
  <span class="hljs-built_in">console</span>.log( getState() )
})
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../usage/Basic.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Basic"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
